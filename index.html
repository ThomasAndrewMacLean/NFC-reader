<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1>Tab your card</h1>
    <p>
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem, in! Hic facilis eveniet omnis? Earum reprehenderit inventore, nisi excepturi aperiam impedit, quis dolor quaerat quia corporis consequatur alias doloribus est!
    </p>
    <div id="test"></div>
    <div id="test1"></div>
    <div id="test2"></div>
    <div id="test3"></div>
    <div id="test4"></div>
    <div id="test5"></div>
    <script>
        if ('NDEFReader' in window) {

            document.getElementById("test1").innerText = 'NDEFReader';

            const ndef = new NDEFReader();
            ndef.scan().then(() => {
                document.getElementById("test2").innerText =("Scan started successfully.");
                ndef.onreadingerror = () => {
                    document.getElementById("test3").innerText =("Cannot read data from the NFC tag. Try another one?");
                };

                ndef.onreading = event => {
                    const message = event.message;
                    for (const record of message.records) {
                        console.log("Record type:  " + record.recordType);
                        console.log("MIME type:    " + record.mediaType);
                        console.log("Record id:    " + record.id);
                        switch (record.recordType) {
                            case "text":
                                document.getElementById("test").innerText = JSON.stringify(record);
                                // TODO: Read text record with record data, lang, and encoding.
                                break;
                            case "url":
                                // TODO: Read URL record with record data.
                                break;
                            default:
                            // TODO: Handle other records with record data.
                        }
                    }

                };
            }).catch(error => {
                document.getElementById("test4").innerText =(`Error! Scan failed to start: ${error}.`);
            });


        }else{
            document.getElementById("test5").innerText = 'NO NDEFReader';

        }
    </script>
</body>

</html>